<canvas id="trail-canvas"></canvas>

<style>
  #trail-canvas {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999; /* sits over all content */
  }
  @media (prefers-reduced-motion: reduce) {
    #trail-canvas { display: none !important; }
  }
</style>

<script>
(function () {
  const fine = matchMedia('(pointer:fine)').matches && matchMedia('(hover:hover)').matches;
  const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (!fine || reduce) return;

  const canvas = document.getElementById('trail-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, DPR;

  function resize() {
    DPR = window.devicePixelRatio || 1;
    W = canvas.width = innerWidth * DPR;
    H = canvas.height = innerHeight * DPR;
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
  }
  addEventListener('resize', resize);
  resize();

  const tailCount = 20; // number of chasing stars
  const stars = [];
  let mouseX = innerWidth / 2, mouseY = innerHeight / 2;

  for (let i = 0; i < tailCount; i++) {
    stars.push({
      x: mouseX,
      y: mouseY,
      size: 3,
      opacity: 1
    });
  }

  addEventListener('mousemove', e => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  }, { passive: true });

  function animate() {
    ctx.clearRect(0, 0, innerWidth, innerHeight);

    // Move each star toward the one ahead of it
    stars[0].x += (mouseX - stars[0].x) * 0.25;
    stars[0].y += (mouseY - stars[0].y) * 0.25;

    for (let i = 1; i < tailCount; i++) {
      stars[i].x += (stars[i - 1].x - stars[i].x) * 0.25;
      stars[i].y += (stars[i - 1].y - stars[i].y) * 0.25;
    }

    // Draw stars
    for (let i = 0; i < tailCount; i++) {
      const p = stars[i];
      const alpha = 1 - i / tailCount; // fade along the tail
      ctx.beginPath();
      ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(209, 90, 67, ${alpha})`; // coral
      ctx.fill();
    }

    requestAnimationFrame(animate);
  }
  animate();
})();
</script>
